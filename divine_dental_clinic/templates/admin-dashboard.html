{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" 
    integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" 
    crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" 
    rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <title>DIVINE DENTAL CLINIC</title>
    <link rel="shortcut icon" href="{% static 'img/vim-removebg.png' %}" type="image/x-icon">
    <style>
        .Dashboardcontainer{
                width: 31.5%;
            }
        @media only screen and (max-width: 650px) {
            .dashboard-cards{
                width: 100%;
                display:flex;
                flex-direction: column;
                gap: 20px;
            }
            .Dashboardcontainer{
                width: 98%;
            }
        }
    </style>
</head>

<body style="background-color: rgb(235, 235, 238);">
    <header style="position: fixed;width: 100%;">
        <nav style="width: 100%; padding-top: 1px; background-color: rgb(224, 224, 224);">
            <div style="
            display: flex; justify-content: space-between;">
                <div style="
                width: 80%; 
                display: flex;
                background-color: hsl(0, 0%, 100%);
                justify-content: space-between;
                align-items: center;
                padding: 1%;
                border-radius: 3px;
                border: 1px solid rgb(224, 224, 224);">
                    <div style="display: flex;">
                        <img style="height: 50px;margin: -20px 0 -20px 0;" src="{% static 'img/vim-removebg.png' %}" alt="img">
                        <!--<h2 style="font-size: 18px;">DIVINE DENTAL CLINIC</h2>-->
                    </div>
                    <button id="refreshButton" style="
                    background-color: rgb(108, 192, 248); 
                    border: none;
                    border-radius: 3px;
                    color: white;"><i class="fa-solid fa-rotate"></i>Refresh</button>
                </div>
                <div class="dropdown" style="
                display: flex; 
                align-items: center;
                padding: 1%;
                width: 20%;
                background-color: hsl(0, 0%, 100%);
                gap: 10px;
                border: 1px solid rgb(224, 224, 224);
                border-radius: 3px;
                align-items: center;">

                    <div>
                        <img style="width: 30px;height: 30px;border-radius: 50%;" src="{% static 'img/user.jpg' %}" alt="pic">
                    </div>
                    <div style="display: flex;flex-direction: column; justify-content: center; height: 30px;">
                        <p style="font-size: 12px; font-weight: 500; margin-top: 15px;">Good day, {{request.user.username}}</p>
                        <p style="font-size: 12px; margin-top: -15px; color: grey;font-weight: 500;">TDL</p>
                    </div>
                    <div>
                        <a href="{% url 'admin_my_profile' %}"><button style="
                            background-color: white;
                            border: none;"><i class="fa-solid fa-gear"></i></button></a>
                    </div>

                </div>
            </div>
        </nav> 
        <nav style="
        border-bottom: 6px solid rgb(108, 192, 248);
        height: 40px;" class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container-fluid">
              
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a style="font-size: 12px;font-family: sans-serif, Courier; font-weight: 500;color: black;" class="nav-link active" aria-current="page" href="{% url 'admin_dashboard' %}"><i class="fa-solid fa-house"></i> Dashboard</a>
                        </li>
                        <li class="nav-item">
                            <a style="font-size: 12px;font-family: sans-serif, Courier; font-weight: 500;color: black;" class="nav-link" href="{% url 'admin_queue' %}"><i class="fa-solid fa-id-card"></i> Queue</a>
                        </li>
                        <li class="nav-item">
                            <a style="font-size: 12px;font-family: sans-serif, Courier; font-weight: 500;color: black;" class="nav-link" href="{% url 'admin_appointments' %}"><i class="fa-solid fa-calendar-days"></i> Appointments</a>
                        </li>
                        <li class="nav-item">
                            <a style="font-size: 12px;font-family: sans-serif, Courier; font-weight: 500;color: black;" class="nav-link" href="{% url 'admin_patient_treatment' %}"><i class="fa-solid fa-database"></i> Patient Treatment</a>
                        </li>
                        <li class="nav-item">
                            <a style="font-size: 12px;font-family: sans-serif, Courier; font-weight: 500;color: black;" class="nav-link" href="{% url 'admin_online_diary' %}"><i class="fa-solid fa-calendar-days"></i> Online Diary</a>
                        </li>
                        <li class="nav-item">
                            <a style="font-size: 12px;font-family: sans-serif, Courier; font-weight: 500;color: black;" class="nav-link" href="{% url 'admin_actions' %}"><i class="fa-solid fa-calendar-days"></i> Admin</a>
                        </li>
                    </ul>
                    
                </div>

            </div>
        </nav>
    </header>

    <div class="extended" style="padding-top: 10px;">
        <div class="dashboard-cards" style="
            display: flex; 
            justify-content: space-between;
            padding: 20px 40px;
            padding-top: 130px;
            margin-top: 3px;">

            <div class="Dashboardcontainer" >
                <div style="
                    background-color: navy;
                    color: white;
                    padding: 5px;
                    border-top-left-radius: 8px;
                    border-top-right-radius: 8px;">
                    <h5 style="font-size: 17px; font-family: sans-serif;">Today's Visits, {{today}}</h5>
                </div>
                <div style=" 
                padding: 20px;
                background-color: white;
                border-bottom-right-radius: 8px;
                border-bottom-left-radius: 8px;">
                    <div class="table-responsive ">
                        {% if queueds %}
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                    <th scope="col" style="font-size: 12px;font-family: sans-serif, Courier; font-weight: 700;color: black;">#</th>
                                    <th scope="col" style="font-size: 12px;font-family: sans-serif, Courier; font-weight: 700;color: black;">Patient</th>
                                    <th scope="col" style="font-size: 12px;font-family: sans-serif, Courier; font-weight: 700;color: black;">Phone</th>
                                    <th scope="col" style="font-size: 12px;font-family: sans-serif, Courier; font-weight: 700;color: black;">Time</th>
                                    <th scope="col" style="font-size: 12px;font-family: sans-serif, Courier; font-weight: 700;color: black;">Doctor</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for queued in queueds %}
                                        <tr>
                                        <th scope="row" style="font-size: 12px;font-family: sans-serif, Courier;">{{queued.number}}</th>
                                        <td style="font-size: 12px;font-family: sans-serif, Courier;">{{queued.patient.first_name}}</td>
                                        <td style="font-size: 12px;font-family: sans-serif, Courier;">{{queued.patient.phone}}</td>
                                        <td style="font-size: 12px;font-family: sans-serif, Courier;">{{queued.date}}</td>
                                        <td style="font-size: 12px;font-family: sans-serif, Courier;">{{queued.doctor}}</td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        {% else %}
                            <p>No Queued Patients for today, {{today}} </p>
                        {% endif %}
                    </div>
                </div>
            </div>
            

            <div class="Dashboardcontainer" >
                <div style="
                    background-color: rgb(108, 192, 248);
                    color: rgb(107, 107, 107);
                    padding: 5px;
                    border-top-left-radius: 8px;
                    border-top-right-radius: 8px;">
                    <h5 style="font-size: 17px;">Today's Appointments, {{today}}</h5>
                </div>
                <div style=" 
                padding: 20px;
                background-color: white;
                border-bottom-right-radius: 8px;
                border-bottom-left-radius: 8px;">
                    <div class="table-responsive ">
                        {% if appointments %}
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                    <th scope="col" style="font-size: 12px;font-family: sans-serif, Courier; font-weight: 700;color: black;">#</th>
                                    <th scope="col" style="font-size: 12px;font-family: sans-serif, Courier; font-weight: 700;color: black;">Patient</th>
                                    <th scope="col" style="font-size: 12px;font-family: sans-serif, Courier; font-weight: 700;color: black;">Procedure</th>
                                    <th scope="col" style="font-size: 12px;font-family: sans-serif, Courier; font-weight: 700;color: black;">Phone</th>
                                    <th scope="col" style="font-size: 12px;font-family: sans-serif, Courier; font-weight: 700;color: black;">Time</th>
                                    <th scope="col" style="font-size: 12px;font-family: sans-serif, Courier; font-weight: 700;color: black;">Doctor</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for appointment in appointments %}
                                    <tr>
                                    <th scope="row" style="font-size: 12px;font-family: sans-serif, Courier;">{{appointment.patient.queue_set.all.0.id}}</th>
                                    <td style="font-size: 12px;font-family: sans-serif, Courier;">{{appointment.patient}}</td>
                                    <td style="font-size: 12px;font-family: sans-serif, Courier;">{{appointment.procedure}}</td>
                                    <td style="font-size: 12px;font-family: sans-serif, Courier;">{{appointment.patient.phone}}</td>
                                    <td style="font-size: 12px;font-family: sans-serif, Courier;">{{appointment.start_time}}</td>
                                    <td style="font-size: 12px;font-family: sans-serif, Courier;">{{appointment.doctor}}</td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        {% else %}
                            <p>No appointments for today, {{today}}</p>
                        {% endif %}
                    </div>
                </div>
            </div>

            <div class="Dashboardcontainer" >
                <div style="
                    background-color: orange;
                    color: rgb(107, 107, 107);
                    padding: 5px;
                    border-top-left-radius: 8px;
                    border-top-right-radius: 8px;">
                    <h5 style="font-size: 17px;">Tomorrow's Appointments, {{tomorrow}}</h5>
                </div>
                <div style=" 
                padding: 20px;
                background-color: white;
                border-bottom-right-radius: 8px;
                border-bottom-left-radius: 8px;">
                    <div class="table-responsive ">
                        {% if appoint %}
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                    <th scope="col" style="font-size: 12px;font-family: sans-serif, Courier; font-weight: 700;color: black;">#</th>
                                    <th scope="col" style="font-size: 12px;font-family: sans-serif, Courier; font-weight: 700;color: black;">Patient</th>
                                    <th scope="col" style="font-size: 12px;font-family: sans-serif, Courier; font-weight: 700;color: black;">Procedure</th>
                                    <th scope="col" style="font-size: 12px;font-family: sans-serif, Courier; font-weight: 700;color: black;">Phone</th>
                                    <th scope="col" style="font-size: 12px;font-family: sans-serif, Courier; font-weight: 700;color: black;">Time</th>
                                    <th scope="col" style="font-size: 12px;font-family: sans-serif, Courier; font-weight: 700;color: black;">Doctor</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for appointment in appoint %}
                                    <tr>
                                    <th scope="row" style="font-size: 12px;font-family: sans-serif, Courier;">{{appointment.patient.queue_set.all.0.id}}</th>
                                    <td style="font-size: 12px;font-family: sans-serif, Courier;">{{appointment.patient}}</td>
                                    <td style="font-size: 12px;font-family: sans-serif, Courier;">{{appointment.procedure}}</td>
                                    <td style="font-size: 12px;font-family: sans-serif, Courier;">{{appointment.patient.phone}}</td>
                                    <td style="font-size: 12px;font-family: sans-serif, Courier;">{{appointment.start_time}}</td>
                                    <td style="font-size: 12px;font-family: sans-serif, Courier;">{{appointment.doctor}}</td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        {% else %}
                            <p>No appointments for tomorrow, {{tomorrow}}</p>
                        {% endif %}
                    </div>
                </div>
            </div>

        </div>
    </div>

<script>
    const refreshButton = document.getElementById("refreshButton");

    refreshButton.addEventListener("click", function() {
    window.location.reload();
    });
</script>
</body>
</html>